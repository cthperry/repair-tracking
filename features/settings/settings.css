/**
 * 設定 - 樣式
 * V161 - Settings Module - Styles
 */

.settings-module {
  padding: 16px;
  max-width: 1320px;
  margin: 0 auto;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-toolbar{/* 樣式由 core/ui.css 的 .module-toolbar 提供 */}


.settings-card{}
.settings-card-header{}
.settings-card-title{}
.settings-card-meta{}
.settings-card-body{}

.settings-card-actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
}

.ua-actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
}

.ua-status-row{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;
}
.ua-status-row .chip{
  white-space:nowrap;
}

.ua-status-wrap{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.ua-chips{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  align-items:center;
}
.ua-status-actions{
  display:flex;
  align-items:center;
  gap:6px;
  flex-wrap:wrap;
}
.ua-mini{
  height:28px;
  padding:0 10px;
  border-radius:10px;
  font-size:12px;
  white-space:nowrap;
}

.ua-status-wrap{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.ua-chips{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  align-items:center;
}
.ua-status-actions{
  display:flex;
  align-items:center;
  gap:6px;
  flex-wrap:wrap;
}
.ua-mini{
  height:28px;
  padding:0 10px;
  border-radius:10px;
  font-size:12px;
  white-space:nowrap;
}

.settings-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.settings-row-top{align-items:flex-start;}

.settings-col{width:100%;display:flex;flex-direction:column;gap:10px;}

.settings-inline{display:flex;align-items:center;flex-wrap:wrap;}
.settings-inline-gap{gap:8px;}

.settings-label {
  min-width: 88px;
  font-size: 13px;
  color: var(--color-text);
  font-weight: 600;
}

.settings-hint {
  margin-top: 0;
  font-size: 12px;
  color: var(--color-text-secondary);
}

/* ========================================
   機台保養設定（Maintenance Settings in Settings page）
   ======================================== */
.maint-settings-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(240px, 1fr));
  gap: 10px 12px;
}
.maint-settings-chips{
  margin-top: 10px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
}

@media (max-width: 720px){
  .maint-settings-grid{ grid-template-columns: 1fr; }
}

#settings-status{margin-top:10px;}


/* ========================================
   設備產品線 / 機型清單
   ======================================== */
.mc-top{display:flex;flex-direction:column;gap:10px;}
.mc-lines{align-items:center;}
.mc-add{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
.mc-add .input{max-width:280px;}

.mc-editor{margin-top:10px;display:flex;flex-direction:column;gap:10px;}
.mc-editor-head{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;}
.mc-title{font-weight:800;color:var(--color-text);}
.mc-actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}

.mc-flag{
  margin-left:8px;
  display:inline-flex;
  align-items:center;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.35);
  font-size:11px;
  font-weight:800;
  color:var(--color-text-secondary);
  background: rgba(148,163,184,.08);
}



/* ========================================
   常用公司（Top N 釘選）
   ======================================== */
.pinned-list{display:flex;flex-direction:column;gap:8px;}
.pinned-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border:1px solid var(--color-border);
  border-radius:12px;
  background: linear-gradient(180deg, var(--color-panel) 0%, var(--color-panel-alt) 100%);
}
.pinned-name{
  font-weight:600;
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.pinned-actions{display:flex;gap:6px;flex-wrap:wrap;align-items:center;}
.pinned-btn{height:28px;padding:0 10px;border-radius:10px;font-size:12px;}
.danger-outline{border-color:rgba(220,38,38,0.35);color:var(--color-error);}
.danger-outline:hover{background:rgba(220,38,38,0.08);}



/* ========================================
   權限管理（User Admin）
   - 讓表格滿版、避免出現左側大片空白
   - 提供搜尋、加入建立時間欄位
   ======================================== */
.user-admin-card{width:100%;}
.user-admin-card .card-body{display:flex;flex-direction:column;gap:10px;}
.ua-layout{display:flex;flex-direction:column;gap:10px;}
.ua-subbar{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;}
.ua-note{font-size:12px;color:var(--color-text-secondary);}
.ua-right{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.ua-table-wrap{width:100%;} /* 明確指定，避免在 flex/inline 佈局下縮到只剩內容寬 */
.ua-table{min-width:920px;}

@media (max-width: 640px) {
  .settings-module { padding: 14px; }
  .settings-row { flex-direction: column; align-items: stretch; }
  .settings-label { min-width: 0; }

  .mc-add .input{max-width:100%;flex:1;}
}

/* ========================================
   權限管理 - 狀態欄位內的停用控制（V161.095）
   ======================================== */
.ua-status-wrap{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.ua-chips{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  align-items:center;
}
.ua-status-actions{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  align-items:center;
}
.ua-mini{
  height:28px;
  padding:0 10px;
  border-radius:10px;
  font-size:12px;
  white-space:nowrap;
}



/* V161.097 - 權限管理：工具列/新增使用者/更緊湊的列樣式 */
.ua-count{font-size:12px;white-space:nowrap;}
.ua-select{min-width:110px;}
.ua-createbar{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  padding:10px;
  border:1px dashed rgba(59,130,246,0.25);
  border-radius:12px;
  background:rgba(59,130,246,0.04);
}
.ua-createbar .input{height:36px;}
#ua-create-email{min-width:240px;flex:2 1 260px;}
#ua-create-name{min-width:160px;flex:1 1 180px;}
.ua-create-hint{font-size:12px;}

.ua-table th, .ua-table td{vertical-align:middle;}
.ua-actions{gap:6px;flex-wrap:nowrap;justify-content:flex-end;}
.ua-actions .btn{height:28px;padding:0 10px;border-radius:10px;font-size:12px;white-space:nowrap;}

@media (max-width: 960px) {
  .ua-actions{flex-wrap:wrap;justify-content:flex-start;}
  .ua-status-row{flex-wrap:wrap;}
}

/* ========================================
   備份 / 還原（本機資料）
   ======================================== */
.backup-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
.backup-meta{font-size:12px;margin-top:6px;}


/* ===============================
   Repair Templates (V161.105)
   =============================== */
.templates-card .card-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}
.templates-card .card-header > div{min-width:0;}
/* 讓左側標題區在窄寬時自然撐滿並換行，避免右側按鈕擠壓造成溢出 */
.templates-card .card-header > div:first-child{
  flex: 1 1 360px;
  min-width: 220px;
}
.templates-card .card-actions{
  margin-left:auto;
  max-width:100%;
  flex: 0 1 auto;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  justify-content:flex-end;
}
.templates-list{ display:flex; flex-direction:column; gap:10px; }
.template-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px;
  border:1px solid rgba(0,0,0,.08);
  border-radius:12px;
  background:rgba(255,255,255,.65);
  flex-wrap:wrap;
}
.template-main{ min-width:0; flex: 1 1 360px; }
.template-name{ font-weight:700; margin-bottom:6px; overflow-wrap:anywhere; word-break:break-word; }
.template-meta{ display:flex; align-items:center; flex-wrap:wrap; gap:8px; color:rgba(0,0,0,.65); font-size:12px; }
.template-actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-left:auto;
  justify-content:flex-end;
  max-width:100%;
}
.template-actions .btn{ white-space:nowrap; }
.pill{
  display:inline-flex;
  align-items:center;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  border:1px solid rgba(0,0,0,.10);
  background:rgba(0,0,0,.04);
}
.pill.ok{ background:rgba(46, 204, 113, .12); border-color:rgba(46, 204, 113, .25); }
.pill.muted{ background:rgba(0,0,0,.03); }
.dot{ width:4px; height:4px; border-radius:50%; background:rgba(0,0,0,.25); display:inline-block; }

.icon-btn{ border:0; background:transparent; font-size:18px; cursor:pointer; padding:6px 8px; border-radius:10px; }

.grid2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.grid2 .span2{ grid-column:1 / -1; }

@media (max-width: 720px){
  .template-row{ flex-direction:column; align-items:stretch; }
  .template-actions{ justify-content:flex-start; margin-left:0; }
  .grid2{ grid-template-columns:1fr; }
  .templates-card .card-actions{ justify-content:flex-start; }
}

/* ------------------------------
   Repair Templates Modal (scoped)
   - 避免覆蓋 core/ui.css 的 .modal 定義
------------------------------ */
.tpl-modal-backdrop{
  position:fixed; inset:0;
  display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.35);
  z-index:1300;
  padding:16px;
}
.tpl-modal-backdrop.show{ display:flex; }
.tpl-modal{
  width:min(860px, 100%);
  max-height:90vh;
  overflow:hidden;
  background:var(--color-surface);
  border-radius:16px;
  box-shadow:0 20px 50px rgba(0,0,0,.25);
  display:flex;
  flex-direction:column;
}
.tpl-modal .tpl-modal-header{
  display:flex; justify-content:space-between; align-items:center;
  padding:14px 16px;
  border-bottom:1px solid rgba(0,0,0,.08);
  flex: 0 0 auto;
}
.tpl-modal .tpl-modal-title{ font-weight:900; }
.tpl-modal .tpl-modal-body{
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
  overflow:auto;
  flex: 1 1 auto;
}
.tpl-modal .tpl-modal-body label{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:13px;
}
.tpl-modal .tpl-modal-body .help{ font-size:12px; color:rgba(0,0,0,.58); }

/* V161.114: needParts checkbox block */
.tpl-needparts{
  display:flex;
  flex-direction:column;
  gap:6px;
  padding:10px 12px;
  border:1px solid rgba(0,0,0,.08);
  border-radius:12px;
  background:rgba(0,0,0,.02);
}
.tpl-needparts-label{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  user-select:none;
}
.tpl-needparts-label input[type="checkbox"]{ transform: translateY(1px); }
.tpl-modal .tpl-modal-footer{
  padding:12px 16px;
  border-top:1px solid rgba(0,0,0,.08);
  display:flex; justify-content:flex-end; gap:8px;
  flex: 0 0 auto;
  background:var(--color-surface);
}

@media (max-width: 520px){
  .tpl-modal-backdrop{ padding:10px; }
  .tpl-modal .tpl-modal-body{ padding:12px; }
  .tpl-modal .tpl-modal-footer{ justify-content:stretch; flex-wrap:wrap; }
  .tpl-modal .tpl-modal-footer .btn{ flex:1 1 120px; }
}


/* V161.105 - subtle highlight when navigating from Repairs -> Settings templates */
.flash-highlight{
  outline: 2px solid rgba(60,130,246,0.35);
  box-shadow: 0 0 0 6px rgba(60,130,246,0.08);
  transition: box-shadow .2s ease, outline-color .2s ease;
}
